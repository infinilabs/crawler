cluster:
  name: gopa
#node.name: node1

path.data: data
path.logs: log
path.certs: cert

allow_multi_instance: true
max_num_of_instances: 5

tls_enabled: false

logging.level: debug

network:
  host: 127.0.0.1

#cluster.seeds: 127.0.0.1:13001,127.0.0.1:13002,127.0.0.1:13003
cluster.seeds:
  - 127.0.0.1:13001
  - 127.0.0.1:13002
  - 127.0.0.1:13003

channel:
  checker_chan_buff_size: 0
  fetch_chan_buff_size: 0

task.default:
  split_by_url_parameter: "p,pn,page,start,index"
  save_url_pattern: ".*"
  link_extract_pattern: "(\\s+(src2|src|href|HREF|SRC))\\s*=\\s*[\"']?(.*?)[\"']"
  link_extract_group: 3
  follow_same_domain: true
  follow_sub_domain: true
  skip_page_parse_pattern: ".*?\\.((js)|(css)|(rar)|(gz)|(zip)|(exe)|(bmp)|(jpeg)|(gif)|(png)|(jpg)|(apk))\\b"
  fetch_url_pattern": ".*"


modules:
- module: crawler
  enabled: true
  max_go_routine: 1
  fetch_threshold_ms: 0
  default_pipeline_config:
    name: my_crawler
    start:
      joint: init_task
      enabled: true
    process:
      - joint: url_normalization
        enabled: true
        parameters:
          follow_all_domain: false
          follow_sub_domain: true
      - joint: load_metadata
        enabled: true
      - joint: ignore_timeout
        parameters:
          ignore_timeout_after_count: 5
        enabled: true
      - joint: fetch
        enabled: true
      - joint: parse
        enabled: true
        parameters:
          dispatch_links: true
          max_depth: 1
          max_breadth: 1
      - joint: html2text
        parameters:
          merge_whitespace: false
        enabled: true
      - joint: hash
        enabled: true
        parameters:
          simhash_enabled: false
#          simhash_dict_folder: mydict
      - joint : save_snapshot_fs
        enabled: false
      - joint : save_snapshot_db
        enabled: true
        parameters:
          compress_enabled: true
          bucket: "Snapshot"
          snapshottime_toless: "1440,720,360,180,90,45,20,10,1"
          snapshottime_tomore: "1,10,20,30,60,90,180,360,720,1440,2880,10080,21600"
      - joint: index
        enabled: false
    end:
      joint: save_task
      enabled: true


- module: cluster
  enabled: true

- module: api
  enabled: true

- module: web
  enabled: true

- module: storage
  enabled: true

- module: filter
  enabled: true

- module: queue
  enabled: true

- module: checker
  enabled: true
  default_pipeline_config:
    name: my_checker
    start:
      joint: init_task
      enabled: true
    process:
      - joint: url_normalization
        enabled: true
        parameters:
          follow_all_domain: false
          follow_sub_domain: true
      - joint: url_ext_filter
        enabled: true
      - joint: url_check_filter
        enabled: true
    end:
      joint: save_task
      enabled: true
      parameters:
        is_create: true



- module: index
  enabled: true
  elasticsearch:
    endpoint: http://192.168.3.206:9200
    index: gopa

- module: dispatch
  enabled: true

- module: database
  enabled: true

- module: statsd
  enabled: false
  host: 192.168.3.208
  port: 8125
  namespace: gopa.
  interval_in_seconds: 1
